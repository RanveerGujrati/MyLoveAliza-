import React, { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export default function LoveBook() {
  const [open, setOpen] = useState(true);
  const coverUrl = "/cover.png"; // Replace with your uploaded cover image path
  const pageBg = "/pages.png"; // Replace with your uploaded lips background image path

  const pages = [
    "My love, distance may keep us apart, but nothing can dim the light of my heart. Every beat whispers your name.",
    "When I close my eyes at night, I feel your hand in mine, and the world becomes soft and warm.",
    "Your smile is my sunrise, your laughter my favorite song, your love my forever home.",
    "Even oceans between us cannot silence the promise I hold, to love you endlessly, faithfully, completely.",
    "Every message from you is a treasure, every call a lifeline, every memory a reason to keep going.",
    "One day, my love, these miles will vanish, and I will hold you as if never letting go.",
    "Until that day, I send you my love in every sunrise, and wrap you in my prayers every night.",
    "Forever yours, in this life and the next, my heart beats only for you. ‚ù§Ô∏è  \n\n‚ú® I love you Madam Ji ‚ù§Ô∏è ‚ú®"
  ];

  return (
    <div className="min-h-screen w-full bg-gradient-to-b from-pink-50 to-white flex flex-col items-center justify-center p-6">
      {/* 3D Book Container */}
      <div className="relative w-[340px] h-[480px] md:w-[420px] md:h-[600px] perspective" onClick={() => setOpen(v => !v)}>
        <Book3D coverUrl={coverUrl} pageBg={pageBg} pages={pages} open={open} />
      </div>
      <p className="mt-6 text-slate-500 text-sm">Click the book to {open ? "close" : "open"} üíï</p>
    </div>
  );
}

function Book3D({ coverUrl, pageBg, pages, open }) {
  return (
    <motion.div
      className="relative preserve3d w-full h-full"
      initial={{ rotateY: -12 }}
      animate={{ rotateY: open ? -12 : 24 }}
      transition={{ type: "spring", stiffness: 80, damping: 14 }}
    >
      {/* Shadow */}
      <motion.div
        className="absolute -bottom-6 left-6 right-6 h-12 rounded-full blur-2xl bg-black/10"
        initial={{ opacity: 0.4 }}
        animate={{ opacity: open ? 0.35 : 0.5 }}
      />

      {/* Back cover */}
      <div className="absolute inset-0 rounded-xl bg-slate-900" style={{ transform: `translateZ(-30px)` }} />

      {/* Pages */}
      <AnimatePresence>
        {pages.map((text, i) => {
          const delay = i * 0.05;
          const z = i + 2;
          return (
            <motion.div
              key={`page-${i}-${open}`}
              className="absolute inset-0 rounded-lg origin-left no-backface flex items-center justify-center p-6 text-center"
              style={{
                transform: `translateZ(${z}px)`,
                backgroundImage: `url(${pageBg})`,
                backgroundSize: "cover",
                fontFamily: "'Dancing Script', cursive",
                fontSize: "1.2rem",
                color: "#3a2d2d",
                lineHeight: "1.6",
              }}
              initial={{ rotateY: open ? 180 : 0 }}
              animate={{ rotateY: open ? 0 : 180 }}
              transition={{ duration: 0.8, ease: "easeInOut", delay }}
            >
              <p className="whitespace-pre-line">{text}</p>
            </motion.div>
          );
        })}
      </AnimatePresence>

      {/* Front cover */}
      <motion.div
        className="absolute inset-0 rounded-xl origin-left overflow-hidden"
        style={{ boxShadow: "0 10px 30px rgba(2,6,23,.18)" }}
        initial={{ rotateY: open ? -180 : 0 }}
        animate={{ rotateY: open ? 0 : -180 }}
        transition={{ type: "spring", stiffness: 90, damping: 14 }}
      >
        <img src={coverUrl} alt="cover" className="w-full h-full object-cover" />
      </motion.div>

      {/* Styles */}
      <style>{`
        .perspective { perspective: 1400px; }
        .preserve3d { transform-style: preserve-3d; }
        .no-backface { backface-visibility: hidden; }
      `}</style>
    </motion.div>
  );
}

